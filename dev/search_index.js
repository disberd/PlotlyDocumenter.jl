var documenterSearchIndex = {"docs":
[{"location":"vitepress/#Usage-with-DocumenterVitepress","page":"DocumenterVitepress","title":"Usage with DocumenterVitepress","text":"","category":"section"},{"location":"vitepress/","page":"DocumenterVitepress","title":"DocumenterVitepress","text":"PlotlyDocumenter provides an extension to work with DocumenterVitepress. As raw javascript code cannot be executed in Vue, an alternate approach is required. For this reason, when using DocumenterVitepress, the custom plot object will be rendered as the <VuePlotly/> component.","category":"page"},{"location":"vitepress/","page":"DocumenterVitepress","title":"DocumenterVitepress","text":"warning: Warning\nThe keyword arguments for to_documenter are ignored when using DocumenterVitepress.","category":"page"},{"location":"vitepress/","page":"DocumenterVitepress","title":"DocumenterVitepress","text":"To make this work, first install the plotly.js-dist-min package and associated types @types/plotly.js-dist-min in your project:","category":"page"},{"location":"vitepress/","page":"DocumenterVitepress","title":"DocumenterVitepress","text":"npm install plotly.js-dist-min\nnpm install --save-dev @types/plotly.js-dist-min","category":"page"},{"location":"vitepress/","page":"DocumenterVitepress","title":"DocumenterVitepress","text":"Then, in your docs/src/components directory create a file called PlotlyWrapper.vue with the following content:","category":"page"},{"location":"vitepress/","page":"DocumenterVitepress","title":"DocumenterVitepress","text":"<template>\n    <div ref=\"divRef\" :id=\"plotlyId\"></div>\n</template>\n\n<script setup lang=\"ts\">\nimport { onBeforeUnmount, ref, watchEffect } from 'vue'\nimport type { Data, Layout, Config } from 'plotly.js-dist-min'\n\nconst props = defineProps<{\n    data?: Plotly.Data[]\n    layout?: Partial<Plotly.Layout>\n    config?: Partial<Plotly.Config>\n}>();\n\nconst randomString = Math.random().toString(36).slice(2, 7);\nconst plotlyId = ref<string>(`plotly-${randomString}`);\nconst divRef = ref<Plotly.PlotlyHTMLElement>();\n\ndefineExpose({ plotlyId });\n\nfunction debounce<Params extends any[]>(\n    func: (...args: Params) => any,\n    timeout: number\n): (...args: Params) => void {\n    let timer: NodeJS.Timeout\n    return (...args: Params) => {\n        clearTimeout(timer)\n        timer = setTimeout(() => {\n            func(...args)\n        }, timeout)\n    }\n}\n\n// SSR check - everything after this will only run on the client\nif (typeof window == 'undefined') return;\n\nconst Plotly = await import('plotly.js-dist-min');\n\nlet isCreated = false\n\nfunction resize() {\n    Plotly.Plots.resize(divRef.value as Plotly.Root)\n}\n\nconst resizeObserver = new ResizeObserver(debounce(resize, 50))\n\nwatchEffect(async () => {\n    const data = props.data ? props.data : []\n    const div = divRef.value as Plotly.Root\n    if (isCreated) {\n        Plotly.react(div, data, props.layout, props.config)\n    } else if (div) {\n        await Plotly.newPlot(div, data, props.layout, props.config)\n        resizeObserver.observe(div as Plotly.PlotlyHTMLElement)\n        isCreated = true\n    }\n})\n\nonBeforeUnmount(() => {\n    resizeObserver.disconnect()\n    Plotly.purge(divRef.value as Plotly.Root)\n})\n</script>","category":"page"},{"location":"vitepress/","page":"DocumenterVitepress","title":"DocumenterVitepress","text":"and a component called VuePlotly.vue with the following content:","category":"page"},{"location":"vitepress/","page":"DocumenterVitepress","title":"DocumenterVitepress","text":"<template>\n    <Suspense>\n        <VuePlotly\n            :data=\"props.data\"\n            :layout=\"props.layout\"\n            :config=\"props.config\"\n        />\n        <template #fallback>\n            <div>Loading plot...</div>\n        </template>\n    </Suspense>\n</template>\n\n<script setup lang=\"ts\">\nimport VuePlotly from './PlotlyWrapper.vue'\nimport type { Data, Layout, Config } from 'plotly.js-dist-min'\n\nconst props = defineProps<{\n    data?: Data[]\n    layout?: Partial<Layout>\n    config?: Partial<Config>\n}>()\n</script> ","category":"page"},{"location":"vitepress/","page":"DocumenterVitepress","title":"DocumenterVitepress","text":"Finally, in your docs/src/.vitepress/theme/index.ts file, add the following code:","category":"page"},{"location":"vitepress/","page":"DocumenterVitepress","title":"DocumenterVitepress","text":"import VuePlotly from \"../../components/VuePlotly.vue\"\n\nexport default {\n...\nenhanceApp({ app, router, siteData }) {\n    ...\n    app.component('VuePlotly', VuePlotly);\n    ...\n}\n} satisfies Theme","category":"page"},{"location":"vitepress/","page":"DocumenterVitepress","title":"DocumenterVitepress","text":"In your make.jl, make sure you call using PlotlyDocumenter before makedocs.","category":"page"},{"location":"vitepress/#Explanation","page":"DocumenterVitepress","title":"Explanation","text":"","category":"section"},{"location":"vitepress/","page":"DocumenterVitepress","title":"DocumenterVitepress","text":"Due to SSR requirements of vitepress, we have to import plotly.js dynamically. This is done in the PlotlyWrapper.vue component. Since this dynamic import requires a suspense boundary, this boundary is provided by the VuePlotly.vue component, which simply wraps the PlotlyWrapper.vue component.","category":"page"},{"location":"","page":"Home","title":"Home","text":"CurrentModule = PlotlyDocumenter","category":"page"},{"location":"#PlotlyDocumenter","page":"Home","title":"PlotlyDocumenter","text":"","category":"section"},{"location":"","page":"Home","title":"Home","text":"Documentation for PlotlyDocumenter.","category":"page"},{"location":"","page":"Home","title":"Home","text":"This package provides a function to_documenter that returns a wrapped plot object. This object will be rendered interactively by Documenter. If you are using DocumenterVitepress, see here for more information.","category":"page"},{"location":"","page":"Home","title":"Home","text":"note: Note\nTo prevent to_documenter from showing up in the documentation, add #hide to the end of the line. See Documenter.jl for more information.","category":"page"},{"location":"#API","page":"Home","title":"API","text":"","category":"section"},{"location":"","page":"Home","title":"Home","text":"Modules = [PlotlyDocumenter]","category":"page"},{"location":"#PlotlyDocumenter.PlotlyDocumenterPlot","page":"Home","title":"PlotlyDocumenter.PlotlyDocumenterPlot","text":"PlotlyDocumenterPlot\n\nA wrapper type for Plotly plot data that enables flexible rendering in different contexts.\n\nThe plot data is stored as strings containing the JSON representation of the plot's data, layout and config.\n\nThe options field contains rendering options that control how the plot is displayed. For the default  text/html MIME output, see to_documenter for more information.\n\n\n\n\n\n","category":"type"},{"location":"#PlotlyDocumenter.change_default_plotly_version-Tuple{Any}","page":"Home","title":"PlotlyDocumenter.change_default_plotly_version","text":"change_default_plotly_version(version::String)\n\nChange the plotly version that is used by default to render Plotly plots using to_documenter\n\n\n\n\n\n","category":"method"},{"location":"#PlotlyDocumenter.to_documenter-Tuple{P} where P","page":"Home","title":"PlotlyDocumenter.to_documenter","text":"to_documenter(p::P; id, version)\n\nTake a plot object p and returns an output that is showable as HTML inside pages generated from Documenter.jl. This function currently works correctly inside @example blocks from Documenter.jl if called as last statement/command. Check the package documentation for seeing it in action.\n\nThe object returned as output, when shown as text/html, will generate a plotly plot can be interacted with directly in the documentation page.\n\nThis package supports the following types as P:\n\nPlot from PlotlyBase\nSyncPlot from PlotlyBase\nPlot from PlotlyLight\n\nKeyword Arguments\n\nid: The id to be given to the div containing the plot. Defaults to a random string of 10 alphanumeric characters\nversion: Version of plotly.js to use. Defaults to version 2.24.2, but can be overridden by providing version as a string. To change the default version, use the unexported change_default_plotly_version function.\nclasses: A Vector of Strings representing classes to assign the div containing the plot. Defaults to an empty vector\nstyle: An object containing a list of styles that are applied inline to the plot object. Defaults to an empty NTuple. Supports the synthax of HypertextLiteral\n\nNotes\n\nThe package does not reexport any plotting packages, so the desired plotting package must be brought in to scope independently.\nThe package currently only supports fetching the plotly library from CDN, so it does not support local version of Plotly (even though they are supported by PlotlyLight for example)\n\n\n\n\n\n","category":"method"},{"location":"#Examples","page":"Home","title":"Examples","text":"","category":"section"},{"location":"#PlotlyBase","page":"Home","title":"PlotlyBase","text":"","category":"section"},{"location":"","page":"Home","title":"Home","text":"using PlotlyDocumenter\nusing PlotlyBase\n\np = Plot(scatter(;y = rand(5)))\nto_documenter(p)","category":"page"},{"location":"#PlotlyJS","page":"Home","title":"PlotlyJS","text":"","category":"section"},{"location":"","page":"Home","title":"Home","text":"using PlotlyDocumenter\nusing PlotlyJS\n\np = plot(scatter(;y = rand(5)), Layout(height = 700))\nto_documenter(p)","category":"page"},{"location":"#PlotlyLight","page":"Home","title":"PlotlyLight","text":"","category":"section"},{"location":"","page":"Home","title":"Home","text":"using PlotlyDocumenter\nusing PlotlyLight\n\np = Plot(;y = rand(5), type = \"scatter\")\nto_documenter(p)","category":"page"}]
}
